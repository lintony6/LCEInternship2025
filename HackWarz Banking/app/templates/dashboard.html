<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | Bank of HackWarz</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="navbar">
        <div class="logo">🏦 Bank of HackWarz</div>
        <div class="nav-user">Welcome, {{ user }}</div>
    </div>

    <div class="hero-banner">
        <img src="https://via.placeholder.com/1000x200?text=Welcome+to+Bank+of+HackWarz" alt="Bank Banner">
    </div>

    <div class="container">
        <h2>Account Overview</h2>

        <div class="account-info">
            <p><strong>Account Holder:</strong> {{ user }}</p>
            <p><strong>Account Type:</strong> Checking</p>
            <p><strong>Balance:</strong> ${{ '%.2f'|format(8392.47 if user != 'admin' else 1000000.00) }}</p>
        </div>

        {% if flag %}
        <div class="flag-box">
            <h3>🚩 Security Alert</h3>
            <p>{{ flag }}</p>
        </div>
        {% else %}
        <p class="info-msg">No important notifications at this time.</p>
        {% endif %}
		
		{% if user == 'Bob Smith' %}
		<div class="special-access">
			<h3>🔒 Bonus Access</h3>
			<p>Enter Code:</p>
			<input type="text" id="cat-code" placeholder="Enter code..." />
			<button onclick="submitCode()">Submit</button>
			<p id="cat-result" style="color: green; font-weight: bold;"></p>
		</div>

		<script>
			function submitCode() {
				const input = document.getElementById('cat-code').value.trim();
				const result = document.getElementById('cat-result');
				fetch('/check_code', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
					},
				body: JSON.stringify({ code: input })
					})
				.then(response => response.json())
				.then(data => {
					if (data.flag) {
						result.textContent = data.flag;
					} else {
						result.textContent = "❌ " + (data.error || "Invalid code");
					}
				})
				.catch(err => {
					result.textContent = "❌ Request failed";
					});
				}
		</script>
		{% endif %}

		<div class="download-log">
			<a href="/static/transactions.log" download>📄 Download Transaction Log</a>
		</div>

    <footer>© 2025 Bank of HackWarz. All rights reserved.</footer>
</body>
</html>
